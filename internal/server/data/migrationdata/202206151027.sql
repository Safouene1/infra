PRAGMA foreign_keys=OFF;
BEGIN TRANSACTION;
CREATE TABLE `identities` (`id` integer,`created_at` datetime,`updated_at` datetime,`deleted_at` datetime,`name` text,`last_seen_at` datetime,`created_by` integer,PRIMARY KEY (`id`));
INSERT INTO identities VALUES(61847065345728513,'2022-06-20 11:58:09.44132103-04:00','2022-06-20 11:58:09.44132103-04:00',NULL,'connector','0001-01-01 00:00:00+00:00',1);
INSERT INTO identities VALUES(61847165790920704,'2022-06-20 11:58:33.389250061-04:00','2022-06-20 12:00:33.568215258-04:00',NULL,'admin@example.com','2022-06-20 16:00:33.568187844+00:00',0);
CREATE TABLE `groups` (`id` integer,`created_at` datetime,`updated_at` datetime,`deleted_at` datetime,`name` text,`created_by` integer,`created_by_provider` integer,PRIMARY KEY (`id`));
CREATE TABLE `identities_groups` (`group_id` integer,`identity_id` integer,PRIMARY KEY (`group_id`,`identity_id`),CONSTRAINT `fk_identities_groups_identity` FOREIGN KEY (`identity_id`) REFERENCES `identities`(`id`),CONSTRAINT `fk_identities_groups_group` FOREIGN KEY (`group_id`) REFERENCES `groups`(`id`));
CREATE TABLE `providers` (`id` integer,`created_at` datetime,`updated_at` datetime,`deleted_at` datetime,`name` text,`url` text,`client_id` text,`client_secret` text,`created_by` integer,PRIMARY KEY (`id`));
INSERT INTO providers VALUES(61847065345728512,'2022-06-20 11:58:09.441138099-04:00','2022-06-20 12:02:07.472189705-04:00',NULL,'infra','','','AAAAEAtbSWSSTOjKCnPX5VFEnG8GYWVzZ2NtBGYwhH0iL2hvbWUvZGFuaWVsLy5pbmZyYS9zcWxpdGUzLmRiLmtleQwO7VviSXsHVPPbcpo',1);
INSERT INTO providers VALUES(61848063720103936,'2022-06-20 12:02:07.472014088-04:00','2022-06-20 12:02:07.472014088-04:00',NULL,'test','example.com/provider','clientid','AAAAHMAfjhhBkl/DHlfjBSWkk9uI5qcwWDbxq0Hvl4IGYWVzZ2NtBGYwhH0iL2hvbWUvZGFuaWVsLy5pbmZyYS9zcWxpdGUzLmRiLmtleQym/5AQQ7Auk1dKeCI',1);
CREATE TABLE `provider_users` (`identity_id` integer,`provider_id` integer, `id` integer, `created_at` datetime, `updated_at` datetime, `deleted_at` datetime, `email` text, `groups` text, `last_update` datetime, `redirect_url` text, `access_token` text, `refresh_token` text, `expires_at` datetime,PRIMARY KEY (`identity_id`,`provider_id`),CONSTRAINT `fk_provider_users_identity` FOREIGN KEY (`identity_id`) REFERENCES `identities`(`id`),CONSTRAINT `fk_provider_users_provider` FOREIGN KEY (`provider_id`) REFERENCES `providers`(`id`));
INSERT INTO provider_users VALUES(61847165790920704,61847065345728512,61847165988052992,'2022-06-20 11:58:33.436547469-04:00','2022-06-20 11:58:33.436547469-04:00',NULL,'admin@example.com','','2022-06-20 15:58:33.436509517+00:00','','AAAAEBC2L0QSp7vwUblLFA4Vg6kGYWVzZ2NtBGYwhH0iL2hvbWUvZGFuaWVsLy5pbmZyYS9zcWxpdGUzLmRiLmtleQyCJCqpDNlhtcsQZwc','AAAAELnKOvAOG4dPvo25zgasBgAGYWVzZ2NtBGYwhH0iL2hvbWUvZGFuaWVsLy5pbmZyYS9zcWxpdGUzLmRiLmtleQxN+n+0orZAazlKNRs','0001-01-01 00:00:00+00:00');
CREATE TABLE `grants` (`id` integer,`created_at` datetime,`updated_at` datetime,`deleted_at` datetime,`subject` text,`privilege` text,`resource` text,`created_by` integer,PRIMARY KEY (`id`));
INSERT INTO grants VALUES(61847065345728514,'2022-06-20 11:58:09.44167972-04:00','2022-06-20 11:58:09.44167972-04:00',NULL,'i:9jWDwTh31a','connector','infra',1);
INSERT INTO grants VALUES(61847165988052994,'2022-06-20 11:58:33.436830694-04:00','2022-06-20 11:58:33.436830694-04:00',NULL,'i:9jWGaVgUbC','admin','infra',61847165790920704);
CREATE TABLE `destinations` (`id` integer,`created_at` datetime,`updated_at` datetime,`deleted_at` datetime,`name` text,`unique_id` text,`connection_url` text,`connection_ca` text,`resources` text,`roles` text,PRIMARY KEY (`id`));
CREATE TABLE `access_keys` (`id` integer,`created_at` datetime,`updated_at` datetime,`deleted_at` datetime,`name` text,`issued_for` integer,`provider_id` integer,`expires_at` datetime,`extension` integer,`extension_deadline` datetime,`key_id` text,`secret_checksum` blob,PRIMARY KEY (`id`),CONSTRAINT `fk_access_keys_issued_for_identity` FOREIGN KEY (`issued_for`) REFERENCES `identities`(`id`));
INSERT INTO access_keys VALUES(61847166172602368,'2022-06-20 11:58:33.480920058-04:00','2022-06-20 12:00:33.568090461-04:00',NULL,'admin@example.com-9jWGbv17QY',61847165790920704,61847065345728512,'2022-07-20 15:58:33.437403561+00:00',259200000000000,'2022-06-23 16:00:33.568052239+00:00','sBmuHEUjCx',X'e87eff0e4ac5aae3c1c3167414a767918fde37e65fc279cbaab5633c6c1d020b');
CREATE TABLE `settings` (`id` integer,`created_at` datetime,`updated_at` datetime,`deleted_at` datetime,`private_jwk` blob,`public_jwk` blob,PRIMARY KEY (`id`));
INSERT INTO settings VALUES(61847065341534208,'2022-06-20 11:58:09.440898354-04:00','2022-06-20 11:58:09.440898354-04:00',NULL,X'41414141346b7675583055544142306e704d6d6b63614b5a64485731325046756664764231794a38396b336658504c53332b4754697a655555735a2f5943435a323965792b5676356961714a78546f39376865353567644f6b32744c61342f50707871365532662b353877304370537a37642b74754431594332536834724b50386635434f4379636e5264524253476969745a765732507348624f316345306d556e666930504977584f30656d3262774e466b72476d4f706945786f6554642f70446a767677737979454f496246485639682b486d7261765a486d3872566266614d734a4a6e35464537675a31495576567a6c776c6635654c644c485a4d736f3542557a722f774f6647562b5268576744356f4d7932384f4b34543554685942576468554a524853487a4f5159773558356b6b475957567a5a324e7442475977684830694c326876625755765a474675615756734c793570626d5a795953397a635778706447557a4c6d52694c6d746c65517838796e7057754a4a6e3749396a396d45',X'7b22757365223a22736967222c226b7479223a224f4b50222c226b6964223a2275317947464779534b54336b6255496f3030467542614975442d523950626d6b6c71554e536b3977694e553d222c22637276223a2245643235353139222c22616c67223a2245443235353139222c2278223a2241415f562d6d496844615569586668716a784f7968496d4e76736c306f51346a697238355257666e426451227d');
CREATE TABLE `encryption_keys` (`id` integer,`created_at` datetime,`updated_at` datetime,`deleted_at` datetime,`key_id` integer,`name` text,`encrypted` blob,`algorithm` text,`root_key_id` text,PRIMARY KEY (`id`));
INSERT INTO encryption_keys VALUES(61847065324756992,'2022-06-20 11:58:09.436445905-04:00','2022-06-20 11:58:09.436445905-04:00',NULL,945140213,'dbkey',X'414141414d4343777456556e7a7855576871414d357179307373626736746e4a7438426b762b5044746d4a7a676c497942443673634449335561373757463152672b6a2f6b675a685a584e6e59323045343744455167414d614c48466f414a4b55353239415a7330','aesgcm','/home/daniel/.infra/sqlite3.db.key');
CREATE TABLE `credentials` (`id` integer,`created_at` datetime,`updated_at` datetime,`deleted_at` datetime,`identity_id` integer,`password_hash` blob,`one_time_password` numeric,`one_time_password_used` numeric,PRIMARY KEY (`id`));
INSERT INTO credentials VALUES(61847165988052993,'2022-06-20 11:58:33.43669488-04:00','2022-06-20 11:58:33.43669488-04:00',NULL,61847165790920704,X'24326124313024365944644b4c6966524b2e7657327679657278566665372e67517279482e734f69795743756b67503933396641586f7335694e5679',0,0);
CREATE TABLE migrations (id VARCHAR(255) PRIMARY KEY);
INSERT INTO migrations VALUES('SCHEMA_INIT');
INSERT INTO migrations VALUES('202203231621');
INSERT INTO migrations VALUES('202203241643');
INSERT INTO migrations VALUES('202203301642');
INSERT INTO migrations VALUES('202203301652');
INSERT INTO migrations VALUES('202203301643');
INSERT INTO migrations VALUES('202203301645');
INSERT INTO migrations VALUES('202203301646');
INSERT INTO migrations VALUES('202203301647');
INSERT INTO migrations VALUES('202203301648');
INSERT INTO migrations VALUES('202204061643');
INSERT INTO migrations VALUES('202204111503');
INSERT INTO migrations VALUES('202204181613');
INSERT INTO migrations VALUES('202204211705');
INSERT INTO migrations VALUES('202204281130');
INSERT INTO migrations VALUES('202204291613');
INSERT INTO migrations VALUES('202206081027');
CREATE UNIQUE INDEX `idx_identities_name` ON `identities`(`name`) WHERE deleted_at is NULL;
CREATE UNIQUE INDEX `idx_groups_name` ON `groups`(`name`) WHERE deleted_at is NULL;
CREATE UNIQUE INDEX `idx_providers_name` ON `providers`(`name`) WHERE deleted_at is NULL;
CREATE UNIQUE INDEX `idx_destinations_unique_id` ON `destinations`(`unique_id`) WHERE deleted_at is NULL;
CREATE UNIQUE INDEX `idx_access_keys_key_id` ON `access_keys`(`key_id`) WHERE deleted_at is NULL;
CREATE UNIQUE INDEX `idx_access_keys_name` ON `access_keys`(`name`) WHERE deleted_at is NULL;
CREATE UNIQUE INDEX `idx_encryption_keys_key_id` ON `encryption_keys`(`key_id`);
CREATE UNIQUE INDEX `idx_credentials_identity_id` ON `credentials`(`identity_id`) WHERE deleted_at is NULL;
COMMIT;
